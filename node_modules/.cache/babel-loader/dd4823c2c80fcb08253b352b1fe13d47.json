{"ast":null,"code":"var _jsxFileName = \"/home/duarte/Desktop/dev/reactandapi/auth0-react-sample-classes/src/views/external-api.js\";\n// src/views/external-api.js\nimport React, { useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport axios from \"axios\";\n\nconst ExternalApi = () => {\n  const [message, setMessage] = useState(\"\");\n  const serverUrl = process.env.REACT_APP_SERVER_URL;\n  const {\n    getAccessTokenSilently\n  } = useAuth0();\n\n  const callApi = async () => {\n    try {\n      const response = await fetch(`${serverUrl}/api/messages/public-message`);\n      const responseData = await response.json();\n      setMessage(responseData.message);\n    } catch (error) {\n      setMessage(error.message);\n    }\n  };\n\n  const callSecureApi = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n      const response = await fetch(`${serverUrl}/api/messages/protected-message`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const responseData = await response.json();\n      setMessage(responseData.message);\n    } catch (error) {\n      setMessage(error.message);\n    }\n  };\n\n  async function callSecureScopeApi() {\n    const token = await getAccessTokenSilently();\n    console.log(token);\n    var options = {\n      method: 'GET',\n      url: `${serverUrl}/api/messages/private-scoped`,\n      headers: {\n        'content-type': 'application/json',\n        authorization: `Bearer ${token}`,\n        'cache-control': 'no-cache'\n      }\n    };\n    axios.request(options).then(function (response) {\n      console.log(response.data);\n    }).catch(function (error) {\n      console.error(error);\n    });\n  }\n  /*const callSecureScopeApi = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n      console.log(token);\n      const response = await fetch(\n        `${serverUrl}/api/messages/private-scoped`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n       const responseData = await response.json();\n      setMessage(responseData.message);\n    } catch (error) {\n      setMessage(error.message);\n    }\n  };*/\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, \"External API\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"Use these buttons to call an external API. The protected API call has an access token in its authorization header. The API server will validate the access token using the Auth0 Audience value.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-group mt-5\",\n    role: \"group\",\n    \"aria-label\": \"External API Requests Examples\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: callApi,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Get Public Message\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: callSecureApi,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, \"Get Protected Message\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: callSecureScopeApi,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"Get Scoped Message\")), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, \"Result\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"code\", {\n    className: \"col-12 text-light bg-dark p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, message)))));\n};\n\nexport default ExternalApi;","map":{"version":3,"sources":["/home/duarte/Desktop/dev/reactandapi/auth0-react-sample-classes/src/views/external-api.js"],"names":["React","useState","useAuth0","axios","ExternalApi","message","setMessage","serverUrl","process","env","REACT_APP_SERVER_URL","getAccessTokenSilently","callApi","response","fetch","responseData","json","error","callSecureApi","token","headers","Authorization","callSecureScopeApi","console","log","options","method","url","authorization","request","then","data","catch"],"mappings":"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","sourcesContent":["// src/views/external-api.js\n\nimport React, { useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport axios from \"axios\";\n\nconst ExternalApi = () => {\n  const [message, setMessage] = useState(\"\");\n  const serverUrl = process.env.REACT_APP_SERVER_URL;\n\n  const { getAccessTokenSilently } = useAuth0();\n\n  const callApi = async () => {\n    try {\n      const response = await fetch(`${serverUrl}/api/messages/public-message`);\n\n      const responseData = await response.json();\n\n      setMessage(responseData.message);\n    } catch (error) {\n      setMessage(error.message);\n    }\n  };\n\n  const callSecureApi = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n      const response = await fetch(\n        `${serverUrl}/api/messages/protected-message`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      const responseData = await response.json();\n      setMessage(responseData.message);\n    } catch (error) {\n      setMessage(error.message);\n    }\n  };\n  async function callSecureScopeApi(){\n    const token = await getAccessTokenSilently();\n    console.log(token);\n    var options = {\n    method: 'GET',\n    url: `${serverUrl}/api/messages/private-scoped`,\n    headers: {\n    'content-type': 'application/json',\n    authorization: `Bearer ${token}`,\n    'cache-control': 'no-cache'\n  }\n};\n\naxios.request(options).then(function (response) {\n  console.log(response.data);\n}).catch(function (error) {\n  console.error(error);\n});\n  }\n  /*const callSecureScopeApi = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n      console.log(token);\n      const response = await fetch(\n        `${serverUrl}/api/messages/private-scoped`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      const responseData = await response.json();\n      setMessage(responseData.message);\n    } catch (error) {\n      setMessage(error.message);\n    }\n  };*/\n\n  return (\n    <div className=\"container\">\n      <h1>External API</h1>\n      <p>\n        Use these buttons to call an external API. The protected API call has an\n        access token in its authorization header. The API server will validate\n        the access token using the Auth0 Audience value.\n      </p>\n      <div\n        className=\"btn-group mt-5\"\n        role=\"group\"\n        aria-label=\"External API Requests Examples\"\n      >\n        <button type=\"button\" className=\"btn btn-primary\" onClick={callApi}>\n          Get Public Message\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={callSecureApi}\n        >\n          Get Protected Message\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={callSecureScopeApi}\n        >\n          Get Scoped Message\n        </button>\n      </div>\n      {message && (\n        <div className=\"mt-5\">\n          <h6 className=\"muted\">Result</h6>\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <code className=\"col-12 text-light bg-dark p-4\">{message}</code>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ExternalApi;"]},"metadata":{},"sourceType":"module"}