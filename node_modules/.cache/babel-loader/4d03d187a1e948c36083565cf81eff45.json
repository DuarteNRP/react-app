{"ast":null,"code":"var _jsxFileName = \"/home/duarte/Desktop/dev/auth0-react-sample-classes/src/views/external-api.js\";\nimport React from \"react\";\nimport { withAuth0 } from \"@auth0/auth0-react\";\n\nclass ExternalApi extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      message: \"\"\n    };\n    this.serverUrl = process.env.REACT_APP_SERVER_URL;\n\n    this.callApi = async () => {\n      try {\n        const response = await fetch(`${this.serverUrl}/api/messages/public-message`);\n        const responseData = await response.json();\n        this.setState({\n          message: responseData.message\n        });\n      } catch (error) {\n        this.setState({\n          message: error.message\n        });\n      }\n    };\n\n    this.callSecureApi = async () => {\n      const {\n        getAccessTokenSilently\n      } = this.props.auth0;\n      const token = await getAccessTokenSilently();\n\n      try {\n        const response = await fetch(`${this.serverUrl}/api/messages/protected-message`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const responseData = await response.json();\n        this.setState({\n          message: responseData.message\n        });\n      } catch (error) {\n        this.setState({\n          message: error.message\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }\n    }, \"External API\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }, \"You use will use a button to call an external API using an access token, and the API will validate it using the API's audience value.\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, \"This route should be protected\"), \".\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-group mt-5\",\n      role: \"group\",\n      \"aria-label\": \"External API Requests Examples\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.callApi,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, \"Get Public Message\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.callSecureApi,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, \"Get Protected Message\")), this.state.message && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, \"Result\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"code\", {\n      className: \"col-12 text-light bg-dark p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }, JSON.stringify(this.state.message, null, 2))))));\n  }\n\n}\n\nexport default withAuth0(ExternalApi);","map":{"version":3,"sources":["/home/duarte/Desktop/dev/auth0-react-sample-classes/src/views/external-api.js"],"names":["React","withAuth0","ExternalApi","Component","state","message","serverUrl","process","env","REACT_APP_SERVER_URL","callApi","response","fetch","responseData","json","setState","error","callSecureApi","getAccessTokenSilently","props","auth0","token","headers","Authorization","render","JSON","stringify"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withAuth0 } from \"@auth0/auth0-react\";\n\nclass ExternalApi extends React.Component {\n  state = {\n    message: \"\",\n  };\n\n  serverUrl = process.env.REACT_APP_SERVER_URL;\n\n  callApi = async () => {\n    try {\n      const response = await fetch(\n        `${this.serverUrl}/api/messages/public-message`\n      );\n\n      const responseData = await response.json();\n\n      this.setState({ message: responseData.message });\n    } catch (error) {\n      this.setState({ message: error.message });\n    }\n  };\n\n  callSecureApi = async () => {\n    const { getAccessTokenSilently } = this.props.auth0;\n    const token = await getAccessTokenSilently();\n\n    try {\n      const response = await fetch(\n        `${this.serverUrl}/api/messages/protected-message`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      const responseData = await response.json();\n\n      this.setState({ message: responseData.message });\n    } catch (error) {\n      this.setState({ message: error.message });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <h1>External API</h1>\n        <p>\n          You use will use a button to call an external API using an access\n          token, and the API will validate it using the API's audience value.\n          <br />\n          <strong>This route should be protected</strong>.\n        </p>\n        <div\n          className=\"btn-group mt-5\"\n          role=\"group\"\n          aria-label=\"External API Requests Examples\"\n        >\n          <button\n            type=\"button\"\n            className=\"btn btn-primary\"\n            onClick={this.callApi}\n          >\n            Get Public Message\n          </button>\n          <button\n            type=\"button\"\n            className=\"btn btn-primary\"\n            onClick={this.callSecureApi}\n          >\n            Get Protected Message\n          </button>\n        </div>\n\n        {this.state.message && (\n          <div className=\"mt-5\">\n            <h6 className=\"muted\">Result</h6>\n            <div className=\"container-fluid\">\n              <div className=\"row\">\n                <code className=\"col-12 text-light bg-dark p-4\">\n                  {JSON.stringify(this.state.message, null, 2)}\n                </code>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withAuth0(ExternalApi);\n"]},"metadata":{},"sourceType":"module"}